<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Scripts IA - Simples</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body { 
            font-family: 'Arial', sans-serif; 
            background: #1a1a1a; 
            color: #ffffff;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #2d2d2d;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        
        h1 {
            color: #4CAF50;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 30px;
        }
        
        .api-key-area {
            background: #333;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .api-key-input {
            width: 100%;
            padding: 12px;
            background: #444;
            border: 1px solid #555;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .info {
            background: #2c5282;
            color: #b3d4fc;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .info a {
            color: #90cdf4;
            text-decoration: none;
        }
        
        .info a:hover {
            text-decoration: underline;
        }
        
        .chat-box {
            background: #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            height: 400px;
            overflow-y: auto;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 8px;
            line-height: 1.5;
        }
        
        .user-message {
            background: #2c5282;
            border-left: 4px solid #4299e1;
        }
        
        .ai-message {
            background: #22543d;
            border-left: 4px solid #48bb78;
            white-space: pre-wrap;
            font-family: 'Consolas', monospace;
        }
        
        .input-area {
            display: flex;
            gap: 10px;
        }
        
        textarea {
            flex: 1;
            padding: 15px;
            background: #333;
            border: 1px solid #555;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }
        
        textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        button {
            padding: 15px 25px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover:not(:disabled) {
            background: #45a049;
        }
        
        button:disabled {
            background: #555;
            cursor: not-allowed;
        }
        
        .examples {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .example-btn {
            padding: 10px;
            background: #444;
            border: 1px solid #555;
            border-radius: 5px;
            color: #ddd;
            text-align: left;
            cursor: pointer;
            font-size: 14px;
        }
        
        .example-btn:hover {
            background: #555;
            border-color: #4CAF50;
        }
        
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', monospace;
            color: #ffcc00;
        }
        
        pre {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #333;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #4CAF50;
            border-radius: 4px;
        }
        
        .typing {
            display: inline-block;
        }
        
        .typing span {
            animation: typing 1s infinite;
            display: inline-block;
            margin-left: 2px;
        }
        
        .typing span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            .examples {
                grid-template-columns: 1fr;
            }
            
            .input-area {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Gerador de Scripts IA</h1>
        <p class="subtitle">Descreva o que precisa ‚Üí Receba o c√≥digo pronto</p>
        
        <div class="api-key-area">
            <input 
                type="text" 
                class="api-key-input" 
                id="apiKey" 
                placeholder="Cole sua chave da Groq API (gsk_...)"
                value=""
            >
            <div class="info">
                üí° <strong>GRATUITO:</strong> Pegue sua chave em 
                <a href="https://console.groq.com" target="_blank">console.groq.com</a>
                ‚Ä¢ Cadastro r√°pido ‚Ä¢ Chave come√ßa com <code>gsk_</code>
            </div>
        </div>
        
        <div class="chat-box" id="chatBox">
            <div class="message ai-message">
                <strong>IA:</strong> Ol√°! Me diga que script voc√™ precisa criar.<br><br>
                Exemplos:<br>
                ‚Ä¢ "Crie um script Python para calcular IMC"<br>
                ‚Ä¢ "JavaScript para um cron√¥metro"<br>
                ‚Ä¢ "HTML/CSS para um formul√°rio de login"<br>
                ‚Ä¢ "Python para renomear arquivos em massa"<br><br>
                Coloque sua chave da Groq acima para come√ßar.
            </div>
        </div>
        
        <div class="input-area">
            <textarea 
                id="userInput" 
                placeholder="Exemplo: Crie um script Python para converter temperatura de Celsius para Fahrenheit..."
            ></textarea>
            <button id="sendBtn">Gerar Script</button>
        </div>
        
        <div class="examples">
            <button class="example-btn" data-example="python-calc">Python: Calculadora cient√≠fica</button>
            <button class="example-btn" data-example="js-todo">JavaScript: Lista de tarefas</button>
            <button class="example-btn" data-example="python-csv">Python: Analisar CSV</button>
            <button class="example-btn" data-example="html-form">HTML/CSS: Formul√°rio bonito</button>
            <button class="example-btn" data-example="python-web">Python: Baixar imagens</button>
            <button class="example-btn" data-example="js-game">JavaScript: Jogo da velha</button>
        </div>
    </div>

    <script>
        // Elementos principais
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const apiKeyInput = document.getElementById('apiKey');
        
        // URL da API Groq (funciona 100%)
        const API_URL = 'https://api.groq.com/openai/v1/chat/completions';
        const MODEL = 'llama-3.1-8b-instant'; // Modelo que FUNCIONA
        
        // Adicionar mensagem ao chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            // Formatar c√≥digo markdown
            let formattedText = text;
            
            // Substituir blocos de c√≥digo
            formattedText = formattedText.replace(/```(\w+)?\n?([\s\S]*?)```/g, 
                function(match, lang, code) {
                    return `<pre><code>${code.trim()}</code></pre>`;
                }
            );
            
            // Adicionar prefixo do sender
            const prefix = sender === 'user' ? '<strong>Voc√™:</strong> ' : '<strong>IA:</strong> ';
            messageDiv.innerHTML = prefix + formattedText;
            
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            
            return messageDiv;
        }
        
        // Mostrar indicador de digita√ß√£o
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-message';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = '<strong>IA:</strong> <span class="typing"><span>.</span><span>.</span><span>.</span></span>';
            chatBox.appendChild(typingDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
        
        // Remover indicador de digita√ß√£o
        function hideTyping() {
            const typing = document.getElementById('typingIndicator');
            if (typing) typing.remove();
        }
        
        // Chamar a API Groq
        async function callGroqAPI(prompt) {
            const apiKey = apiKeyInput.value.trim();
            
            if (!apiKey) {
                throw new Error('Por favor, cole sua chave da Groq API primeiro (gsk_...)');
            }
            
            // Configura√ß√£o SIMPLES que FUNCIONA
            const requestBody = {
                model: MODEL,
                messages: [
                    {
                        role: 'system',
                        content: 'Voc√™ √© um especialista em programa√ß√£o. Gere c√≥digo completo, funcional e bem comentado. Use markdown para formatar o c√≥digo. Responda em portugu√™s.'
                    },
                    {
                        role: 'user',
                        content: prompt
                    }
                ],
                temperature: 0.2,
                max_tokens: 2000,
                top_p: 0.95
            };
            
            // Fazer a requisi√ß√£o
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify(requestBody)
            });
            
            if (!response.ok) {
                const error = await response.text();
                throw new Error(`Erro da API: ${response.status} - ${error}`);
            }
            
            const data = await response.json();
            
            if (data.choices && data.choices[0] && data.choices[0].message) {
                return data.choices[0].message.content;
            } else {
                throw new Error('Resposta da API em formato inesperado');
            }
        }
        
        // Enviar mensagem
        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            
            // Adicionar mensagem do usu√°rio
            addMessage(text, 'user');
            
            // Limpar input
            userInput.value = '';
            
            // Desabilitar bot√£o
            sendBtn.disabled = true;
            sendBtn.textContent = 'Gerando...';
            
            // Mostrar que est√° pensando
            showTyping();
            
            try {
                // Chamar a API
                const response = await callGroqAPI(text);
                
                // Remover indicador de digita√ß√£o
                hideTyping();
                
                // Adicionar resposta da IA
                addMessage(response, 'ai');
                
            } catch (error) {
                // Remover indicador de digita√ß√£o
                hideTyping();
                
                // Mostrar erro amig√°vel
                let errorMessage = `‚ùå Erro: ${error.message}`;
                
                // Dicas para erros comuns
                if (error.message.includes('401') || error.message.includes('403')) {
                    errorMessage += '\n\nüîë Sua chave API pode estar incorreta ou expirada.';
                    errorMessage += '\n‚Ä¢ Pegue uma nova em: console.groq.com';
                    errorMessage += '\n‚Ä¢ A chave deve come√ßar com gsk_';
                } else if (error.message.includes('429')) {
                    errorMessage += '\n\n‚è∞ Muitas requisi√ß√µes. Espere um pouco.';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMessage += '\n\nüåê Problema de internet. Verifique sua conex√£o.';
                }
                
                addMessage(errorMessage, 'ai');
                
                console.error('Erro detalhado:', error);
                
            } finally {
                // Reabilitar bot√£o
                sendBtn.disabled = false;
                sendBtn.textContent = 'Gerar Script';
                userInput.focus();
            }
        }
        
        // Exemplos de prompts
        const examples = {
            'python-calc': `Crie uma calculadora cient√≠fica em Python com as seguintes fun√ß√µes:
1. Opera√ß√µes b√°sicas (+, -, *, /)
2. Pot√™ncia e raiz quadrada
3. Seno, cosseno, tangente
4. Logaritmo natural e base 10
5. Interface simples no terminal

Inclua tratamento de erros e coment√°rios explicativos.`,

            'js-todo': `Crie uma lista de tarefas (To-Do) em JavaScript puro (sem bibliotecas) com:
1. Adicionar nova tarefa
2. Marcar tarefa como conclu√≠da
3. Remover tarefa
4. Filtrar por: todas, pendentes, conclu√≠das
5. Salvar no localStorage

Inclua HTML, CSS e JavaScript em um √∫nico arquivo.`,

            'python-csv': `Crie um script Python para an√°lise de arquivos CSV que:
1. Leia um arquivo CSV (use pandas se necess√°rio)
2. Mostre estat√≠sticas b√°sicas (m√©dia, m√°ximo, m√≠nimo)
3. Gere um gr√°fico simples das colunas num√©ricas
4. Exporte um relat√≥rio em texto
5. Perma ao usu√°rio escolher o arquivo

Inclua tratamento de erro se o arquivo n√£o existir.`,

            'html-form': `Crie um formul√°rio de cadastro em HTML/CSS moderno com:
1. Campos: nome, email, senha, telefone, data nascimento
2. Valida√ß√£o em tempo real
3. Design responsivo e bonito
4. Anima√ß√µes suaves
5. Bot√£o de enviar com feedback

Use CSS moderno (flexbox, gradients, shadows).`,

            'python-web': `Crie um script Python para baixar imagens de uma p√°gina web que:
1. Use requests e BeautifulSoup
2. Aceite URL como entrada
3. Baixe todas as imagens da p√°gina
4. Salve em uma pasta organizada
5. Mostre progresso

Inclua tratamento de erros e timeouts.`,

            'js-game': `Crie o jogo da velha (Tic-Tac-Toe) em JavaScript com:
1. Tabuleiro 3x3
2. Dois jogadores (X e O)
3. Detec√ß√£o de vit√≥ria/empate
4. Contador de pontos
5. Bot√£o de reiniciar

Interface colorida e responsiva.`
        };
        
        // Configurar eventos
        function setupEvents() {
            // Enviar ao clicar no bot√£o
            sendBtn.addEventListener('click', sendMessage);
            
            // Enviar com Enter (sem Shift)
            userInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (!sendBtn.disabled) {
                        sendMessage();
                    }
                }
            });
            
            // Auto-resize do textarea
            userInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            
            // Exemplos r√°pidos
            document.querySelectorAll('.example-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const exampleKey = this.dataset.example;
                    if (examples[exampleKey]) {
                        userInput.value = examples[exampleKey];
                        userInput.style.height = 'auto';
                        userInput.style.height = (userInput.scrollHeight) + 'px';
                        userInput.focus();
                        
                        // Feedback visual
                        this.style.background = '#4CAF50';
                        this.style.color = 'white';
                        setTimeout(() => {
                            this.style.background = '';
                            this.style.color = '';
                        }, 1000);
                    }
                });
            });
            
            // Salvar chave localmente
            apiKeyInput.addEventListener('input', function() {
                localStorage.setItem('groq_api_key', this.value);
            });
            
            // Carregar chave salva
            const savedKey = localStorage.getItem('groq_api_key');
            if (savedKey) {
                apiKeyInput.value = savedKey;
            }
            
            // Habilitar bot√£o se tiver chave
            apiKeyInput.addEventListener('input', function() {
                sendBtn.disabled = !this.value.trim();
            });
            
            // Verificar inicialmente
            sendBtn.disabled = !apiKeyInput.value.trim();
        }
        
        // Iniciar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            setupEvents();
            
            // Focar no input
            setTimeout(() => {
                if (apiKeyInput.value) {
                    userInput.focus();
                } else {
                    apiKeyInput.focus();
                }
            }, 100);
            
            // Mensagem de boas-vindas
            console.log('‚úÖ Gerador de Scripts IA carregado!');
            console.log('üîë Pegue sua chave GRATUITA em: https://console.groq.com');
        });
    </script>
</body>
</html>
